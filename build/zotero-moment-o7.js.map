{"version":3,"file":"zotero-moment-o7.js","mappings":";;;;;;;AAAA;;;GAGG;AAEH,gDAAgD;AAKhD,yBAAyB;AACzB,IAAI,QAAa,CAAC;AAElB,SAAS,GAAG,CAAC,GAAW;IACtB,MAAM,CAAC,KAAK,CAAC,yBAAyB,GAAG,EAAE,CAAC,CAAC;AAC/C,CAAC;AAED,SAAS,OAAO;IACd,GAAG,CAAC,gBAAgB,CAAC,CAAC;AACxB,CAAC;AAED,KAAK,UAAU,OAAO,CAAC,EAAE,EAAE,EAAE,OAAO,EAAE,OAAO,EAAO;IAClD,GAAG,CAAC,8BAA8B,OAAO,EAAE,CAAC,CAAC;IAE7C,8BAA8B;IAC9B,MAAM,MAAM,CAAC,qBAAqB,CAAC;IAEnC,IAAI,CAAC;QACH,+BAA+B;QAC/B,QAAQ,CAAC,YAAY,CAAC,aAAa,CAAC,OAAO,GAAG,mBAAmB,CAAC,CAAC;QAEnE,wBAAwB;QACxB,IAAI,MAAM,CAAC,QAAQ,EAAE,CAAC;YACpB,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;YAE/C,qBAAqB;YACrB,MAAM,CAAC,QAAQ,CAAC,eAAe,EAAE,CAAC;YAElC,0BAA0B;YAC1B,MAAM,MAAM,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;QAC/B,CAAC;aAAM,CAAC;YACN,MAAM,IAAI,KAAK,CAAC,gCAAgC,CAAC,CAAC;QACpD,CAAC;IACH,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QACf,GAAG,CAAC,kBAAkB,KAAK,EAAE,CAAC,CAAC;QAC/B,MAAM,KAAK,CAAC;IACd,CAAC;AACH,CAAC;AAED,SAAS,QAAQ;IACf,GAAG,CAAC,yBAAyB,CAAC,CAAC;IAE/B,IAAI,CAAC;QACH,IAAI,MAAM,CAAC,QAAQ,EAAE,CAAC;YACpB,0BAA0B;YAC1B,MAAM,CAAC,QAAQ,CAAC,oBAAoB,EAAE,CAAC;YAEvC,sBAAsB;YACtB,MAAM,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;YAE3B,6BAA6B;YAC7B,OAAQ,MAAc,CAAC,QAAQ,CAAC;QAClC,CAAC;IACH,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QACf,GAAG,CAAC,mBAAmB,KAAK,EAAE,CAAC,CAAC;IAClC,CAAC;AACH,CAAC;AAED,SAAS,SAAS;IAChB,GAAG,CAAC,kBAAkB,CAAC,CAAC;AAC1B,CAAC;AAED,4BAA4B;AAC5B,SAAS,gBAAgB,CAAC,EAAE,MAAM,EAAsB;IACtD,IAAI,CAAC;QACH,IAAI,MAAM,CAAC,QAAQ,EAAE,CAAC;YACpB,MAAM,CAAC,QAAQ,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;QACtC,CAAC;IACH,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QACf,GAAG,CAAC,sBAAsB,KAAK,EAAE,CAAC,CAAC;IACrC,CAAC;AACH,CAAC;AAED,SAAS,kBAAkB,CAAC,EAAE,MAAM,EAAsB;IACxD,IAAI,CAAC;QACH,IAAI,MAAM,CAAC,QAAQ,EAAE,CAAC;YACpB,MAAM,CAAC,QAAQ,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC;QAC3C,CAAC;IACH,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QACf,GAAG,CAAC,wBAAwB,KAAK,EAAE,CAAC,CAAC;IACvC,CAAC;AACH,CAAC","sources":["webpack://zotero-moment-o7/./bootstrap.ts"],"sourcesContent":["/**\n * Bootstrap loader for Zotero Moment-o7\n * This file loads the compiled TypeScript modules\n */\n\n/// <reference path=\"./src/types/zotero.d.ts\" />\n\n// Declare globals that TypeScript doesn't know about\ndeclare const ChromeUtils: any;\n\n// Import the main plugin\nlet MomentO7: any;\n\nfunction log(msg: string): void {\n  Zotero.debug(`[Moment-o7 Bootstrap] ${msg}`);\n}\n\nfunction install(): void {\n  log('Install called');\n}\n\nasync function startup({ id, version, rootURI }: any): Promise<void> {\n  log(`Starting Moment-o7 version ${version}`);\n  \n  // Wait for Zotero to be ready\n  await Zotero.initializationPromise;\n\n  try {\n    // Load the compiled JavaScript\n    Services.scriptloader.loadSubScript(rootURI + 'build/MomentO7.js');\n    \n    // Initialize the plugin\n    if (Zotero.MomentO7) {\n      Zotero.MomentO7.init({ id, version, rootURI });\n      \n      // Add to all windows\n      Zotero.MomentO7.addToAllWindows();\n      \n      // Run main initialization\n      await Zotero.MomentO7.main();\n    } else {\n      throw new Error('Failed to load MomentO7 module');\n    }\n  } catch (error) {\n    log(`Startup error: ${error}`);\n    throw error;\n  }\n}\n\nfunction shutdown(): void {\n  log('Shutting down Moment-o7');\n  \n  try {\n    if (Zotero.MomentO7) {\n      // Remove from all windows\n      Zotero.MomentO7.removeFromAllWindows();\n      \n      // Shutdown the plugin\n      Zotero.MomentO7.shutdown();\n      \n      // Clear the global reference\n      delete (Zotero as any).MomentO7;\n    }\n  } catch (error) {\n    log(`Shutdown error: ${error}`);\n  }\n}\n\nfunction uninstall(): void {\n  log('Uninstall called');\n}\n\n// Handle window load/unload\nfunction onMainWindowLoad({ window }: { window: Window }): void {\n  try {\n    if (Zotero.MomentO7) {\n      Zotero.MomentO7.addToWindow(window);\n    }\n  } catch (error) {\n    log(`Window load error: ${error}`);\n  }\n}\n\nfunction onMainWindowUnload({ window }: { window: Window }): void {\n  try {\n    if (Zotero.MomentO7) {\n      Zotero.MomentO7.removeFromWindow(window);\n    }\n  } catch (error) {\n    log(`Window unload error: ${error}`);\n  }\n}"],"names":[],"sourceRoot":""}